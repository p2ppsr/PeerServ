<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>PeerServ</title>
    <style>
      body {
        font-family: Arial;
        padding: 1em;
      }
      .main {
        max-width: min(1440px, 100vw);
        margin: auto;
        word-wrap: break-word;
      }
      .method {
        background-color: lime;
        text-transform: uppercase;
      }
    </style>
  </head>
  <body>
    <div class='main'>
      <h1>PeerServ</h1>
      <p>
        Facilitates general secure peer-to-peer message exchanges between parties.
      </p>
      <p>Learn more on <a href='https://github.com/p2ppsr/peerserv'>GitHub</a></p>
      <p>For a UI that can interact with PeerServ, go <a href='https://github.com/p2ppsr/peerserv-tokenator-demo'>here</a>.</p>
      <h2>Endpoint Documentation</h2>
      <% for (let i in routes) { %>
        <% if (routes[i].hidden !== true) { %>
         <h3>
           <b class='method'><%= routes[i].type %></b> <%= routes[i].path %>
         </h3>
         <p>
           <%= routes[i].summary %>
         </p>
         <% if (typeof routes[i].parameters === 'object') { %>
           <h4>Parameters</h4>
           <ul>
              <% Object.entries(routes[i].parameters).forEach(([k, v]) => { %>
                <% if (typeof v === 'object') { %>
                  <pre><%= JSON.stringify(routes[i].parameters, null, 2) %></pre>
                <% } else { %>
                  <li><b><%= k %></b>: <%= v %></li>
                <% } %>
              <% }) %>
           </ul>
         <% } %>
         <% if (typeof routes[i].exampleResponse === 'object') { %>
           <h4>Example Response</h4>
           <pre><%= JSON.stringify(routes[i].exampleResponse, null, 2) %></pre>
         <% } %>
       <% } %>
   <% } %>
      <p>Built with love in 2023 by the Babbage Team</p>
    </div>
  </body>
</html>
